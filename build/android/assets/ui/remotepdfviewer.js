exports.createPDFViewer=function(e,t){var i=function(i,o){var r=Ti.Filesystem.getFile(Ti.Filesystem.applicationDataDirectory,Ti.Utils.md5HexDigest(e)+".pdf");if(r.exists())console.log("Info:  pdf was alreadystored => displaying"),t.hide(),o({path:r,file:Ti.Utils.md5HexDigest(e)});else{var a=Ti.Network.createHTTPClient({onload:function(i){console.log(i.status),t.hide(),r.write(this.responseData),o({path:r,file:Ti.Utils.md5HexDigest(e)})},onerror:function(e){console.log(e.error)},ondatastream:function(e){t.progress.value=e.progress}});a.open("GET",i),console.log("Info: getting pdf="+i),a.send(null),console.log("Info: start pdf downloading")}};console.log("Info: start pdf displaying"),i(e,function(e){if(console.log("Info: pdf is caching and ready for display"),Ti.Filesystem.isExternalStoragePresent()){var t=(new Date).getTime();if(tmpFile=Ti.Filesystem.getFile(Ti.Filesystem.tempDirectory,t+".europom.pdf"),tmpFile.write(e.path.read()),tmpFile.exists()){var i=Ti.Android.createIntent({action:Ti.Android.ACTION_VIEW,type:"application/pdf",data:tmpFile.getNativePath()});try{Ti.Android.currentActivity.startActivity(i)}catch(o){Ti.API.debug(o),alert("No apps PDF apps installed!")}}else Ti.API.info("starting intent tmpFile exists: "+tmpFile.exists()),alert("Our file disappeared!")}else{console.log("Info: iOS node");var r=require("com.kuchbee.quickpdf");r.openPDF({file:e.file,password:"",isMailEnabled:!1,loadFileFrom:"document",close:function(){alert("closed")}})}})};