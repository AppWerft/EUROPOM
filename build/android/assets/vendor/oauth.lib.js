function hex_sha1(e){return binb2hex(core_sha1(str2binb(e),e.length*chrsz))}function b64_sha1(e){return binb2b64(core_sha1(str2binb(e),e.length*chrsz))}function str_sha1(e){return binb2str(core_sha1(str2binb(e),e.length*chrsz))}function hex_hmac_sha1(e,t){return binb2hex(core_hmac_sha1(e,t))}function b64_hmac_sha1(e,t){return binb2b64(core_hmac_sha1(e,t))}function str_hmac_sha1(e,t){return binb2str(core_hmac_sha1(e,t))}function sha1_vm_test(){return"a9993e364706816aba3e25717850c26c9cd0d89d"==hex_sha1("abc")}function core_sha1(e,t){e[t>>5]|=128<<24-t%32,e[(t+64>>9<<4)+15]=t;for(var r=Array(80),o=1732584193,i=-271733879,n=-1732584194,a=271733878,s=-1009589776,c=0;c<e.length;c+=16){for(var l=o,u=i,d=n,p=a,h=s,g=0;80>g;g++){r[g]=16>g?e[c+g]:rol(r[g-3]^r[g-8]^r[g-14]^r[g-16],1);var m=safe_add(safe_add(rol(o,5),sha1_ft(g,i,n,a)),safe_add(safe_add(s,r[g]),sha1_kt(g)));s=a,a=n,n=rol(i,30),i=o,o=m}o=safe_add(o,l),i=safe_add(i,u),n=safe_add(n,d),a=safe_add(a,p),s=safe_add(s,h)}return Array(o,i,n,a,s)}function sha1_ft(e,t,r,o){return 20>e?t&r|~t&o:40>e?t^r^o:60>e?t&r|t&o|r&o:t^r^o}function sha1_kt(e){return 20>e?1518500249:40>e?1859775393:60>e?-1894007588:-899497514}function core_hmac_sha1(e,t){var r=str2binb(e);r.length>16&&(r=core_sha1(r,e.length*chrsz));for(var o=Array(16),i=Array(16),n=0;16>n;n++)o[n]=909522486^r[n],i[n]=1549556828^r[n];var a=core_sha1(o.concat(str2binb(t)),512+t.length*chrsz);return core_sha1(i.concat(a),672)}function safe_add(e,t){var r=(65535&e)+(65535&t),o=(e>>16)+(t>>16)+(r>>16);return o<<16|65535&r}function rol(e,t){return e<<t|e>>>32-t}function str2binb(e){for(var t=Array(),r=(1<<chrsz)-1,o=0;o<e.length*chrsz;o+=chrsz)t[o>>5]|=(e.charCodeAt(o/chrsz)&r)<<32-chrsz-o%32;return t}function binb2str(e){for(var t="",r=(1<<chrsz)-1,o=0;o<32*e.length;o+=chrsz)t+=String.fromCharCode(e[o>>5]>>>32-chrsz-o%32&r);return t}function binb2hex(e){for(var t=hexcase?"0123456789ABCDEF":"0123456789abcdef",r="",o=0;o<4*e.length;o++)r+=t.charAt(e[o>>2]>>8*(3-o%4)+4&15)+t.charAt(e[o>>2]>>8*(3-o%4)&15);return r}function binb2b64(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r="",o=0;o<4*e.length;o+=3)for(var i=(e[o>>2]>>8*(3-o%4)&255)<<16|(e[o+1>>2]>>8*(3-(o+1)%4)&255)<<8|e[o+2>>2]>>8*(3-(o+2)%4)&255,n=0;4>n;n++)r+=8*o+6*n>32*e.length?b64pad:t.charAt(i>>6*(3-n)&63);return r}var hexcase=0,b64pad="",chrsz=8,OAuth;null==OAuth&&(OAuth={}),OAuth.setProperties=function(e,t){if(null!=e&&null!=t)for(var r in t)e[r]=t[r];return e},OAuth.setProperties(OAuth,{percentEncode:function(e){if(null==e)return"";if(e instanceof Array){for(var t="",r=0;r<e.length;++e)""!=t&&(t+="&"),t+=OAuth.percentEncode(e[r]);return t}return e=encodeURIComponent(e),e=e.replace(/\!/g,"%21"),e=e.replace(/\*/g,"%2A"),e=e.replace(/\'/g,"%27"),e=e.replace(/\(/g,"%28"),e=e.replace(/\)/g,"%29")},decodePercent:function(e){return null!=e&&(e=e.replace(/\+/g," ")),decodeURIComponent(e)},getParameterList:function(e){if(null==e)return[];if("object"!=typeof e)return OAuth.decodeForm(e+"");if(e instanceof Array)return e;var t=[];for(var r in e)t.push([r,e[r]]);return t},getParameterMap:function(e){if(null==e)return{};if("object"!=typeof e)return OAuth.getParameterMap(OAuth.decodeForm(e+""));if(e instanceof Array){for(var t={},r=0;r<e.length;++r){var o=e[r][0];void 0===t[o]&&(t[o]=e[r][1])}return t}return e},getParameter:function(e,t){if(e instanceof Array){for(var r=0;r<e.length;++r)if(e[r][0]==t)return e[r][1];return null}return OAuth.getParameterMap(e)[t]},formEncode:function(e){for(var t="",r=OAuth.getParameterList(e),o=0;o<r.length;++o){var i=r[o][1];null==i&&(i=""),""!=t&&(t+="&"),t+=OAuth.percentEncode(r[o][0])+"="+OAuth.percentEncode(i)}return t},decodeForm:function(e){for(var t=[],r=e.split("&"),o=0;o<r.length;++o){var i=r[o];if(""!=i){var n,a,s=i.indexOf("=");0>s?(n=OAuth.decodePercent(i),a=null):(n=OAuth.decodePercent(i.substring(0,s)),a=OAuth.decodePercent(i.substring(s+1))),t.push([n,a])}}return t},setParameter:function(e,t,r){var o=e.parameters;if(o instanceof Array){for(var i=0;i<o.length;++i)o[i][0]==t&&(void 0===r?o.splice(i,1):(o[i][1]=r,r=void 0));void 0!==r&&o.push([t,r])}else o=OAuth.getParameterMap(o),o[t]=r,e.parameters=o},setParameters:function(e,t){for(var r=OAuth.getParameterList(t),o=0;o<r.length;++o)OAuth.setParameter(e,r[o][0],r[o][1])},completeRequest:function(e,t){null==e.method&&(e.method="GET");var r=OAuth.getParameterMap(e.parameters);null==r.oauth_consumer_key&&OAuth.setParameter(e,"oauth_consumer_key",t.consumerKey||""),null==r.oauth_token&&null!=t.token&&OAuth.setParameter(e,"oauth_token",t.token),null==r.oauth_version&&OAuth.setParameter(e,"oauth_version","1.0"),null==r.oauth_timestamp&&OAuth.setParameter(e,"oauth_timestamp",OAuth.timestamp()),null==r.oauth_nonce&&OAuth.setParameter(e,"oauth_nonce",OAuth.nonce(6)),OAuth.SignatureMethod.sign(e,t)},setTimestampAndNonce:function(e){OAuth.setParameter(e,"oauth_timestamp",OAuth.timestamp()),OAuth.setParameter(e,"oauth_nonce",OAuth.nonce(6))},addToURL:function(e,t){if(newURL=e,null!=t){var r=OAuth.formEncode(t);if(r.length>0){var o=e.indexOf("?");newURL+=0>o?"?":"&",newURL+=r}}return newURL},getAuthorizationHeader:function(e,t){for(var r="OAuth ",o=OAuth.getParameterList(t),i=0;i<o.length;++i){var n=o[i],a=n[0];0==a.indexOf("oauth_")&&(r+=OAuth.percentEncode(a)+'="'+OAuth.percentEncode(n[1])+'"'),i!=o.length-1&&(r+=", ")}return r},getAuthorizationHeaderWithoutCallback:function(e,t){for(var r="OAuth ",o=OAuth.getParameterList(t),i=0;i<o.length;++i){var n=o[i],a=n[0];"oauth_callback"!=a&&(0==a.indexOf("oauth_")&&(r+=OAuth.percentEncode(a)+'="'+OAuth.percentEncode(n[1])+'"'),i!=o.length-1&&(r+=", "))}return r},correctTimestampFromSrc:function(e){e=e||"oauth_timestamp";var t=document.getElementsByTagName("script");if(null!=t&&t.length){var r=t[t.length-1].src;if(r){var o=r.indexOf("?");if(!(0>o)){parameters=OAuth.getParameterMap(OAuth.decodeForm(r.substring(o+1)));var i=parameters[e];null!=i&&OAuth.correctTimestamp(i)}}}},correctTimestamp:function(e){OAuth.timeCorrectionMsec=1e3*e-(new Date).getTime()},timeCorrectionMsec:0,timestamp:function(){var e=(new Date).getTime()+OAuth.timeCorrectionMsec;return""+Math.floor(e/1e3)},nonce:function(e){for(var t=OAuth.nonce.CHARS,r="",o=0;e>o;++o){var i=Math.floor(Math.random()*t.length);r+=t.substring(i,i+1)}return r}}),OAuth.nonce.CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",OAuth.declareClass=function(e,t,r){var o=e[t];if(e[t]=r,null!=r&&null!=o)for(var i in o)"prototype"!=i&&(r[i]=o[i]);return r},OAuth.declareClass(OAuth,"SignatureMethod",function(){}),OAuth.setProperties(OAuth.SignatureMethod.prototype,{sign:function(e){var t=OAuth.SignatureMethod.getBaseString(e),r=this.getSignature(t);return Ti.API.info("basestring "+t),OAuth.setParameter(e,"oauth_signature",r),r},initialize:function(e,t){var r;r=null!=t.accessorSecret&&e.length>9&&"-Accessor"==e.substring(e.length-9)?t.accessorSecret:t.consumerSecret,this.key=OAuth.percentEncode(r)+"&"+OAuth.percentEncode(t.tokenSecret)}}),OAuth.setProperties(OAuth.SignatureMethod,{sign:function(e,t){var r=OAuth.getParameterMap(e.parameters).oauth_signature_method;(null==r||""==r)&&(r="HMAC-SHA1",OAuth.setParameter(e,"oauth_signature_method",r)),OAuth.SignatureMethod.newMethod(r,t).sign(e)},newMethod:function(e,t){var r=OAuth.SignatureMethod.REGISTERED[e];if(null!=r){var o=new r;return o.initialize(e,t),o}var i=new Error("signature_method_rejected"),n="";for(var a in OAuth.SignatureMethod.REGISTERED)""!=n&&(n+="&"),n+=OAuth.percentEncode(a);throw i.oauth_acceptable_signature_methods=n,i},REGISTERED:{},registerMethodClass:function(e,t){for(var r=0;r<e.length;++r)OAuth.SignatureMethod.REGISTERED[e[r]]=t},makeSubclass:function(e){var t=OAuth.SignatureMethod,r=function(){t.call(this)};return r.prototype=new t,r.prototype.getSignature=e,r.prototype.constructor=r,r},getBaseString:function(e){var t,r=e.action,o=r.indexOf("?");if(0>o)t=e.parameters;else{t=OAuth.decodeForm(r.substring(o+1));for(var i=OAuth.getParameterList(e.parameters),n=0;n<i.length;++n)t.push(i[n])}return OAuth.percentEncode(e.method.toUpperCase())+"&"+OAuth.percentEncode(OAuth.SignatureMethod.normalizeUrl(r))+"&"+OAuth.percentEncode(OAuth.SignatureMethod.normalizeParameters(t))},normalizeUrl:function(e){var t=OAuth.SignatureMethod.parseUri(e),r=t.protocol.toLowerCase(),o=t.authority.toLowerCase(),i="http"==r&&80==t.port||"https"==r&&443==t.port;if(i){var n=o.lastIndexOf(":");n>=0&&(o=o.substring(0,n))}var a=t.path;return a||(a="/"),r+"://"+o+a},parseUri:function(e){for(var t={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},r=t.parser.strict.exec(e),o={},i=14;i--;)o[t.key[i]]=r[i]||"";return o},normalizeParameters:function(e){if(null==e)return"";for(var t=OAuth.getParameterList(e),r=[],o=0;o<t.length;++o){var i=t[o];"oauth_signature"!=i[0]&&r.push([OAuth.percentEncode(i[0])+" "+OAuth.percentEncode(i[1]),i])}r.sort(function(e,t){return e[0]<t[0]?-1:e[0]>t[0]?1:0});for(var n=[],a=0;a<r.length;++a)n.push(r[a][1]);return OAuth.formEncode(n)}}),OAuth.SignatureMethod.registerMethodClass(["PLAINTEXT","PLAINTEXT-Accessor"],OAuth.SignatureMethod.makeSubclass(function(){return this.key})),OAuth.SignatureMethod.registerMethodClass(["HMAC-SHA1","HMAC-SHA1-Accessor"],OAuth.SignatureMethod.makeSubclass(function(e){b64pad="=";var t=b64_hmac_sha1(this.key,e);return t}));