var exports=exports||this;exports.Slideshow=function(){var e=function(){},t=function(){var r;return r=this instanceof t?this:new e,r.currentImage,r.pointer=0,r};return e.prototype=t.prototype,t.prototype.createSlideshowView=function(e){var t=this;e||(e={}),t.width=e.width||320,t.height=e.height||480,t.duration=e.duration||2e3,t.timeout=e.timeout||1e3,t.images=e.images||[],e.idleTimerDisabled&&(Ti.App.idleTimerDisabled=!0);var r=Ti.UI.createView({width:t.width,height:t.height}),i=Ti.UI.createImageView({zIndex:1e3,opacity:0});r.add(i);var o=Ti.UI.createImageView({zIndex:999,opacity:0});r.add(o),currentImage=i;var n=function(){t.pointer>=t.images.length&&(t.images.shuffle(),t.pointer=0),currentImage.setImage(t.images[t.pointer]);var e=(r.width>r.height?r.width:r.height)/280,a=(1+10*Math.random()/10)*e,s=0,c=0,u=0,d=0;if(Math.random()<.33?(s=(r.width>r.height?r.width:r.height)-280*e,c=(r.width>r.height?r.width:r.height)-280*a):Math.random()<.5&&(s=.5*((r.width>r.height?r.width:r.height)-280*e),c=.5*((r.width>r.height?r.width:r.height)-280*a)),Math.random()<.33?(u=(r.width<r.height?r.width:r.height)-280*e,d=(r.width<r.height?r.width:r.height)-280*a):Math.random()<.5&&(u=.5*((r.width<r.height?r.width:r.height)-280*e),d=.5*((r.width<r.height?r.width:r.height)-280*a)),Math.random()<.5){var l=e;e=a,a=l,l=u,u=d,d=l,l=s,s=c,c=l}currentImage.top=s,currentImage.left=u,currentImage.width=280*e,currentImage.height=280*e,currentImage.animate({duration:t.duration,opacity:1,top:c,left:d,width:280*a,height:280*a},function(){var e=currentImage;currentImage=currentImage===i?o:i,currentImage.setOpacity(0),currentImage.zIndex=1e3,e.zIndex=999,t.pointer++,setTimeout(n,t.timeout)})};return n(),r},t.prototype.setIdleTimterDisabled=function(e){e||(e={}),Ti.App.idleTimerDisabled=e.idleTimerDisabled?!0:!1},t.prototype.setDuration=function(e){var t=this;e||(e={}),t.duration=e.duration||2e3},t.prototype.setImages=function(e){var t=this;e||(e={}),t.images=e.images||[]},t}(this),Array.prototype.shuffle=function(){for(var e=this.length;e;){var t=Math.floor(Math.random()*e),r=this[--e];this[e]=this[t],this[t]=r}return this};