exports.get=function(e){var t,i=e.url;if(!i)return void console.log("Warning: missing url in cachedxhr-client");var o=Ti.Utils.md5HexDigest(i);if(Ti.App.Properties.hasProperty(o)){console.log("Info: old data exists of url="+i+" width key="+o);try{var r=JSON.parse(Ti.App.Properties.getString(o));t=Ti.Utils.md5HexDigest(JSON.stringify(r)),e.onload&&e.onload(r)}catch(a){Ti.App.Properties.removeProperty(o),console.log("saved data kaputt")}}if(!Ti.Network.online)return void(Ti.Android&&Ti.Android.createNotification({message:"Netz nicht da"}).show());var n=Ti.Network.createHTTPClient({onload:function(){var i;if(this.responseText.match(/<\?xml/)){var r=this.responseText.replace(/&amp;/gm,"&").replace(/&nbsp;/gm," ").replace(/&bdquo;/gm,"„").replace(/&rdquo;/gm,"“").replace(/&auml;/gm,"ä").replace(/&ouml;/gm,"ö").replace(/&uuml;/gm,"ü").replace(/&Auml;/gm,"Ä").replace(/&Ouml;/gm,"Ö").replace(/&Uuml;/gm,"Ü").replace(/&szlig;/gm,"ß");Ti.Android&&Ti.UI.createNotification({message:"Apfelnachrichten aktualisiert"}).show();var a=require("vendor/XMLTools"),n=new a(r);i=n.toObject()}else{console.log("Info: received data is JSON: "+this.responseText.length/1e3+"kB");try{i=JSON.parse(this.responseText)}catch(s){return void console.log("Info: received data is JSON and invalide: "+s)}}console.log(typeof i),Ti.App.Properties.setString(o,JSON.stringify(i)),t&&t==Ti.Utils.md5HexDigest(JSON.stringify(i))||e.onload&&e.onload(i)},onerror:function(t){if(console.log("Error: "+t.error),Ti.App.Properties.hasProperty(o))e.onload&&e.onload(JSON.parse(Ti.App.Properties.getString(o)));else if(e.defaultjson){var i=JSON.parse(Ti.Filesystem.getFile(Ti.Filesystem.resourcesDirectory,e.defaultjson).read().text);e.onload&&e.onload(i)}}});n.open("GET",i,!0),n.send(),console.log("Info: start data xhr width "+JSON.stringify(e))};