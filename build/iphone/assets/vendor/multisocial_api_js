Ti.include("/vendor/oauth.lib.js"),Ti.include("/vendor/oauth.adapter.js");var supportedSites={twitter:{accessToken:"https://api.twitter.com/oauth/access_token",requestToken:"https://api.twitter.com/oauth/request_token",authorize:"https://api.twitter.com/oauth/authorize?",update:"https://api.twitter.com/1.1/statuses/update.json",color:"#52D3FE"},linkedin:{accessToken:"https://api.linkedin.com/uas/oauth/accessToken",requestToken:"https://api.linkedin.com/uas/oauth/requestToken?scope=rw_nus",authorize:"https://api.linkedin.com/uas/oauth/authorize?",update:"http://api.linkedin.com/v1/people/~/shares?format=json",color:""},xing:{accessToken:"https://api.xing.com/v1/access_token",requestToken:"https://api.xing.com/v1/request_token",authorize:"https://api.xing.com/v1/authorize?",callback:"oob",color:"#187F7F"},meetup:{accessToken:"https://api.meetup.com/oauth/access/",requestToken:"https://api.meetup.com/oauth/request/",authorize:"http://www.meetup.com/authorize/?oauth_token=request_token_key",api:"http://api.meetup.com/",color:"#187F7F"}},API=function(e){return this.adapter=new OAuthAdapter(e.site,e.consumerSecret,e.consumerKey,"HMAC-SHA1"),this.adapter.loadAccessToken(e.site),this.urls=supportedSites[e.site],console.log(this),this.site=e.site,this};API.prototype.isAuthorized=function(){return this.adapter.isAuthorized()},API.prototype.deauthorize=function(e){this.adapter.clearAccessToken(this.site),this.adapter.isAuthorized()||e&&e(!0)},API.prototype.authorize=function(e){function t(){i.adapter.getAccessToken(i.urls.accessToken,function(t){t.success?(i.adapter.saveAccessToken(i.site),e&&e(!0)):alert("Did not get access token now!")})}var i=this;this.adapter.isAuthorized()?e&&e(!0):(this.adapter.showLoadingUI(this.urls.color),this.adapter.getRequestToken(this.urls.requestToken,function(e){e.success?i.adapter.showAuthorizeUI(i.urls.authorize+e.token,t):alert("Did not get access token now!")}))},API.prototype.shareImage_Twitter=function(e){this.authorize(function(){this.adapter.sendTwitterImage({params:{media:e.image,status:e.message},onSuccess:e.success,onError:e.error})})},API.prototype.share_Twitter=function(e){var t=this;this.authorize(function(){adapter.send({url:t.urls.update,parameters:[["status",e.message]],onSuccess:e.success,onError:e.error})})},API.prototype.share_Linkedin=function(e){var t=this;this.authorize(function(){adapter.shareLinkedin({site:"linkedin",url:t.urls.update,parameters:e.message,onSuccess:e.success,onError:e.error})})},API.prototype.getProfile_Linkedin=function(e){var t=this;this.authorize(function(){adapter.getProfileLinkedin({site:"linkedin",url:t.urls.update,parameters:e.message,onSuccess:e.success,onError:e.error})})},API.prototype.getUserXING=function(e,t){var i=this;this.authorize(function(){i.adapter.Api({url:e.user_id?"https://api.xing.com/v1/users/"+e.user_id:"https://api.xing.com/v1/users/me",method:"GET"},t)})},module.exports=API;